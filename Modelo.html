<!DOCTYPE html>
<html class="writer-html5" lang="es" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Módulo Modelo &mdash; documentación de Agenda - 0.0.</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=780d9e83"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/translations.js?v=efdbd0b9"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Índice" href="genindex.html" />
    <link rel="search" title="Búsqueda" href="search.html" />
    <link rel="next" title="Módulo Vista" href="Vista.html" />
    <link rel="prev" title="Módulo Controlador" href="Controlador.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Agenda
          </a>
              <div class="version">
                0.0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Buscar documentos" aria-label="Buscar documentos" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contenido:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Controlador.html">Módulo Controlador</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Módulo Modelo</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#seccion-inicial-base-de-datos-y-orm">Seccion inicial: Base de Datos y ORM.</a></li>
<li class="toctree-l2"><a class="reference internal" href="#variables-globales">Variables Globales:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creacion-conexion-de-base-de-datos-y-tablas">Creación/conexión de Base de Datos y Tablas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#BaseModel"><code class="docutils literal notranslate"><span class="pre">BaseModel</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#BaseModel.Meta"><code class="docutils literal notranslate"><span class="pre">BaseModel.Meta()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Usuarios"><code class="docutils literal notranslate"><span class="pre">Usuarios</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#abmc-crud-y-sus-metodos">ABMC (CRUD) y sus métodos</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Abmc"><code class="docutils literal notranslate"><span class="pre">Abmc</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Abmc.pass"><code class="docutils literal notranslate"><span class="pre">Abmc.pass()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#abmc-alta">ABMC (Alta)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#funcion_alta_usuarios"><code class="docutils literal notranslate"><span class="pre">funcion_alta_usuarios()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#abmc-baja">ABMC (Baja)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#abmc-modificacion">ABMC (Modificación)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#funcion_actualizar_usuarios"><code class="docutils literal notranslate"><span class="pre">funcion_actualizar_usuarios()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#abmc-consulta">ABMC (Consulta)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#funcion_consulta_general"><code class="docutils literal notranslate"><span class="pre">funcion_consulta_general()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Vista.html">Módulo Vista</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Agenda</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">&lt;no title&gt;</a></li>
      <li class="breadcrumb-item active">Módulo Modelo</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/Modelo.rst.txt" rel="nofollow"> Ver código fuente de la página</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="modulo-modelo">
<h1>Módulo Modelo<a class="headerlink" href="#modulo-modelo" title="Link to this heading"></a></h1>
<dl class="field-list simple">
<dt class="field-odd">synopsis<span class="colon">:</span></dt>
<dd class="field-odd"><p>El módulo denomiado <em>Modelo</em> se encarga de gestionar la conexión a la Base de Datos, el manejo de excepciones y el CRUD de nuestra App Agenda de Usuarios.</p>
</dd>
</dl>
<section id="seccion-inicial-base-de-datos-y-orm">
<h2>Seccion inicial: Base de Datos y ORM.<a class="headerlink" href="#seccion-inicial-base-de-datos-y-orm" title="Link to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p><strong>import sqlite3</strong></p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p><strong>import re</strong></p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p><strong>from peewee import</strong></p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p><strong>from peewee import SqliteDatabase</strong></p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p><strong>from peewee import Model</strong></p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p><strong>from peewee import CharField</strong></p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p><strong>from tkinter import messagebox</strong></p>
</div>
</section>
<section id="variables-globales">
<h2>Variables Globales:<a class="headerlink" href="#variables-globales" title="Link to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p><strong>db = SqliteDatabase(«base_prueba.db»)</strong> # Nombre de nuestra Bases de Datos.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p><strong>db.connect()</strong> # Conector a Base de Datos.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p><strong>db.create_tables([Usuarios])</strong> # Creacion de la Tabla “Usuarios” dentro de nuestra Base de Datos.</p>
</div>
</section>
<section id="creacion-conexion-de-base-de-datos-y-tablas">
<h2>Creación/conexión de Base de Datos y Tablas<a class="headerlink" href="#creacion-conexion-de-base-de-datos-y-tablas" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="BaseModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">BaseModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Model</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#BaseModel" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="BaseModel.Meta">
<span class="sig-name descname"><span class="pre">Meta</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#BaseModel.Meta" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="Usuarios">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Usuarios</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">BaseModel</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Usuarios" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">nombre</span> <span class="pre">=</span> <span class="pre">CharField(unique=True)</span> <span class="pre">#</span> <span class="pre">Campos</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">Tabla</span></span></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">apellido</span> <span class="pre">=</span> <span class="pre">CharField()</span></span></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">dni</span> <span class="pre">=</span> <span class="pre">CharField()</span></span></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">direccion</span> <span class="pre">=</span> <span class="pre">CharField()</span></span></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">pais</span> <span class="pre">=</span> <span class="pre">CharField()</span></span></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">ciudad</span> <span class="pre">=</span> <span class="pre">CharField()</span></span></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cp</span> <span class="pre">=</span> <span class="pre">CharField()</span></span></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">telefono</span> <span class="pre">=</span> <span class="pre">CharField()</span></span></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">email</span> <span class="pre">=</span> <span class="pre">CharField()</span></span></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="abmc-crud-y-sus-metodos">
<h2>ABMC (CRUD) y sus métodos<a class="headerlink" href="#abmc-crud-y-sus-metodos" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="Abmc">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Abmc</span></span><a class="headerlink" href="#Abmc" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">def</span> <span class="pre">__init__(self,):</span></span></dt>
<dt class="sig sig-object py" id="Abmc.pass">
<span class="sig-name descname"><span class="pre">pass</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Abmc.pass" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="abmc-alta">
<h2>ABMC (Alta)<a class="headerlink" href="#abmc-alta" title="Link to this heading"></a></h2>
<dl class="field-list simple">
<dt class="field-odd">synopsis<span class="colon">:</span></dt>
<dd class="field-odd"><p>Creamos el método de instancia y los parámetros que tomará para realizar el alta. En el método se agrega el <em>regex</em> y <em>manejo de excepciones</em>, así como también la variable <em>usuarios</em> que indica el nombre de la tabla donde debe generarse la inserción de datos.</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="funcion_alta_usuarios">
<span class="sig-name descname"><span class="pre">funcion_alta_usuarios</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">var_nombre</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_apellido</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_dni</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_direccion</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_pais</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_ciudad</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_cp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_telefono</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_email</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tree</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#funcion_alta_usuarios" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parámetros<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>var_nombre</strong> (<em>str</em>) – Cada parámetro iniciado con la palabra “var” indica el campo y dato que el usuario ingresará mediante la interfaz gráfica.</p></li>
<li><p><strong>tree</strong> (<em>str</em>) – El parámetro “tree” se encarga de ingresar los datos ingresados en el treeview de nuestra app.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>Asignamos una variable referida a la tabla en la cual inseriremos los datos obtenidos del usuario.</p>
<blockquote>
<div><p><strong>usuarios = (Usuarios())</strong></p>
</div></blockquote>
<p>Las variables que almacenan los datos ingresados por el usuario se determinarán de la siguiente manera:</p>
<blockquote>
<div><p><strong>usuarios.nombre = var_nombre.get()</strong></p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>La misma forma se adapta para el regex <strong>usuarios.email_regex = r»b[A-Za-z0-9._%+-]+&#64;[A-Za-z0-9.-]+.[A-Z|a-z]{2,}b»</strong></p>
</div>
<p>Para finalizar el alta se aplica un bloque con el condicional <em>if/else</em>  y dentro de el aplicamos la secuencia <em>try/except/else/finally</em></p>
<dl class="simple">
<dt>if re.match(usuarios.email_regex, usuarios.email): #  tomamos el regex y los datos ingresados por el usuario</dt><dd><dl class="simple">
<dt>try:</dt><dd><p>usuarios.save() # Realiza el commit con los datos ingresados.
self.funcion_consulta_general(tree) # Ingresa los datos en el treeview.</p>
</dd>
<dt>except:</dt><dd><p>print(«no pasa el try»)</p>
</dd>
<dt>else:</dt><dd><dl class="simple">
<dt>messagebox.showinfo(</dt><dd><p>«Alta de usuario exitosa»,
«El usuario ha sido agregado a la base de datos exitosamente.»,) # Mensaje divisado por el usuario y generado por <em>Tkinter</em> messagebox</p>
</dd>
</dl>
</dd>
<dt>finally:</dt><dd><p>print(«finaliza bloque de alta»)</p>
</dd>
</dl>
</dd>
<dt>else: # Ejecutamos un manejo de excepciones si el regex no se cumple</dt><dd><p>raise Exception(«error al validar campo “Mail”»)
messagebox.showerror(«Error de validación», «El correo electrónico ingresado no es válido.»)</p>
</dd>
</dl>
</section>
<section id="abmc-baja">
<h2>ABMC (Baja)<a class="headerlink" href="#abmc-baja" title="Link to this heading"></a></h2>
<dl class="field-list simple">
<dt class="field-odd">synopsis<span class="colon">:</span></dt>
<dd class="field-odd"><p>Creamos el método de instancia y los parámetros que tomará para realizar la baja.</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">funcion_baja_usuarios(var_id,</span> <span class="pre">tree):</span></span></dt>
<dd><p><strong>seleccion_usuario = tree.focus()</strong>  # Permite seleccionar una fila en el treeeview por el usuario.</p>
<p><strong>usuarios_id = tree.item(seleccion_usuario)</strong> # Asignamos una variable con la fila seleccionada en treeview.</p>
<p><strong>borrar = Usuarios.get(Usuarios.id == usuarios_id[«text»])</strong> # indicamos que la baja se ejecutará sobre la fila seleccionada.</p>
<p><strong>borrar.delete_instance()</strong> # Borra la fila indicada y genera un commit en nuestra Base de Datos.</p>
<p><strong>self.funcion_consulta_general(tree)</strong> # Actualiza el treeview.</p>
</dd></dl>

</section>
<section id="abmc-modificacion">
<h2>ABMC (Modificación)<a class="headerlink" href="#abmc-modificacion" title="Link to this heading"></a></h2>
<dl class="field-list simple">
<dt class="field-odd">synopsis<span class="colon">:</span></dt>
<dd class="field-odd"><p>Creamos el método de instancia y los parámetros que tomará para realizar la modificación. Al tratarse de una modificación tomará todos los parámetros que tiene el Alta.</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="funcion_actualizar_usuarios">
<span class="sig-name descname"><span class="pre">funcion_actualizar_usuarios</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">var_nombre</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_apellido</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_dni</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_direccion</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_pais</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_ciudad</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_cp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_telefono</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_email</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tree</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#funcion_actualizar_usuarios" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parámetros<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>var_nombre</strong> (<em>str</em>) – Cada parámetro iniciado con la palabra “var” indica el campo y dato que el usuario ingresará mediante la interfaz gráfica.</p></li>
<li><p><strong>tree</strong> (<em>str</em>) – El parámetro “tree” se encarga de ingresar los datos ingresados en el treeview de nuestra app.</p></li>
</ul>
</dd>
</dl>
<p><strong>seleccion_usuario = tree.focus()</strong></p>
<p><strong>usuarios_id = tree.item(seleccion_usuario)</strong> # Asignamos variables en donde se almacena la fila seleccionada por el usuario en el treeview.</p>
<p><strong>actualizar = Usuarios.update(nombre=var_nombre.get()).where(Usuarios.id == usuarios_id[«text»])</strong> # La variable <em>Actualizar</em> indica donde se ejecutará la modificación con los datos ingresados por el usuario donde realizó la selección del treeview.</p>
<p><strong>actualizar.execute()</strong> # Se ejecuta la modificación y se realiza el commit en nuestra Base de Datos</p>
<p><strong>self.funcion_consulta_general(tree)</strong> # Se actualiza el treeview</p>
<p><strong>var_nombre.set(«»)</strong> # Se limpian los campos de la interfaz.</p>
</dd></dl>

</section>
<section id="abmc-consulta">
<h2>ABMC (Consulta)<a class="headerlink" href="#abmc-consulta" title="Link to this heading"></a></h2>
<dl class="field-list simple">
<dt class="field-odd">synopsis<span class="colon">:</span></dt>
<dd class="field-odd"><p>Creamos el método de instancia y los parámetros que tomará para realizar la modificación. El método se encargará de traer toda la información de la Base de datos e insertarlas en el treeview mediante un bucle <em>For</em></p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="funcion_consulta_general">
<span class="sig-name descname"><span class="pre">funcion_consulta_general</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tree</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#funcion_consulta_general" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>registros = tree.get_children()</dt><dd><dl class="simple">
<dt>for element in registros:</dt><dd><p>tree.delete(element)</p>
</dd>
<dt>for (fila) in Usuarios.select():</dt><dd><dl class="simple">
<dt>tree.insert(</dt><dd><p>«»,
0,
text=fila.id,
values=(fila.nombre,fila.apellido,fila.dni,fila.direccion,fila.pais,fila.ciudad,fila.cp,fila.telefono,fila.email,),)</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pie de página">
        <a href="Controlador.html" class="btn btn-neutral float-left" title="Módulo Controlador" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
        <a href="Vista.html" class="btn btn-neutral float-right" title="Módulo Vista" accesskey="n" rel="next">Siguiente <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Derechos de autor 2023, Juan,Lucas, Samuel, Sebastian.</p>
  </div>

  Compilado con <a href="https://www.sphinx-doc.org/">Sphinx</a> usando un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">tema</a>
    proporcionado por <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>